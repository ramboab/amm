/*! amm - v0.0.3 - 2014-03-18 */
!function(a){"use strict";function b(a){return a||!1}function c(a){t.alias=s.extend({},t.alias,a)}function d(a){t.preload=t.preload.concat(a)}function e(a){t.base=a}function f(a,c){c&&!Array.isArray(c)&&(c=[c]),this.url=a,this.dependencies=(c||[]).filter(b),this.remain=this.dependencies.length,this.status=q.INITIALIZED,this.exports=null,this.waitings={}}function g(a,b,c){var d=arguments.length;1===d?(c=a,a=void 0):2===d&&(c=b,Array.isArray(a)?(b=a,a=void 0):b=void 0),Array.isArray(b)||"function"!=typeof c||(b=f.parseDependencies(c.toString()));var e={id:a,url:f.resolve(a),deps:b,factory:c};if(!e.url&&m.attachEvent){var g=j();g&&(e.url=g.src.replace(/\/{2,}/g,"//"))}e.url?f.save(e.url,e):k=e}function h(a,b){Array.isArray(a)||(a=[a]),f.preload(function(){f.use(a,b,t.base+"_use_"+s.uid())})}function i(a,b,c){var d=m.createElement("script");d.async="async",d.charset=c||"utf-8",d.onload=d.onerror=d.onreadystatechange=function(){(!d.readyState||/loaded|complete/.test(d.readyState))&&(d.onload=d.onerror=d.onreadystatechange=null,d.parentNode.removeChild(d),d=null,b())},d.src=a,w=d,n.appendChild(d),w=null}function j(){if(w)return w;if(x&&"interactive"===x.readyState)return x;for(var a=n.getElementsByTagName("script"),b=a.length-1;b>=0;b--){var c=a[b];if("interactive"===c.readyState)return x=c}}Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.filter||(Array.prototype.filter=function(a){var b,c=0,d=this.length,e=[];if(0===d)return this;for(;d>c;c++)b=this[c],a(b,c,this)&&e.push(b);return e});var k,l=a.amm={},m=a.document,n=m.head||m.getElementsByTagName("head")[0]||m.documentElement,o=0,p={},q={INITIALIZED:0,FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTTING:5,EXECUTED:6},r={};r.dirname=function(a){return a.match(/[^?#]+[\/\\]/)[0]},r.basename=function(a){for(var b,c=a.split("/");b=c.pop();)return b},r.resolve=function(a){return a?(0!==a.indexOf("http://")&&(a=t.base+a),a=a.replace(/\\/g,"/").replace(/\/{2,}/g,"//"),".js"===a.slice(-3)||a.indexOf("?")>-1?a:a+".js"):void 0};var s={uid:function(a){return(a||"")+ ++o},extend:function(a){if(a!==Object(a))return a;for(var b=0,c=[].slice.call(arguments,1),d=c.length;d>b;b++)for(var e in c[b])Object.prototype.hasOwnProperty.call(c[b],e)===!0&&(a[e]=c[b][e]);return a}},t={base:r.dirname(m.URL),alias:{},preload:[]};f.prototype.fetch=function(){var a=this,b=a.url;a.status>=q.FETCHING||(a.status=q.FETCHING,i(b,function(){k&&(f.save(b,k),k=null),a.load()}))},f.prototype.load=function(){var a=this;if(!(a.status>q.LOADING)){a.status=q.LOADING;{var b,c,d,e=a.dependencies,g=a.remain=e.length;a.waitings}for(b=0;g>b;b++)c=f.resolve(e[b]),d=f.get(c),d.status<q.LOADED?d.waitings[a.url]=(d.waitings[a.url]||0)+1:a.remain--;if(a.remain<=0)return a.onload();for(b=0;g>b;b++)c=f.resolve(e[b]),d=f.get(c),d.status<q.FETCHING?d.fetch():d.status===q.SAVED&&d.load()}},f.prototype.onload=function(){var a=this;if(a.status=q.LOADED,a.callback)return a.callback();{var b=a.waitings;a.deps}for(var c in b)if(b.hasOwnProperty(c)){var d=p[c];d.remain-=b[c],d.remain<=0&&d.onload()}},f.prototype.exec=function(){function require(a){var b=f.resolve(a);return f.get(b).exec()}{var a=this;a.url}if(a.status>=q.EXECUTTING)return a.exports;a.status=q.EXECUTTING;var b=a.factory,c="function"==typeof b?b(require,a.exports={},a):b;return void 0===c&&(c=a.exports),a.exports=c,a.status=q.EXECUTED,c},f.resolve=function(a){return/_(use|preload)_\d+$/.test(a)?a:r.resolve(t.alias[a]||a)};var u=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,v=/\\\\/g;f.parseDependencies=function(a){var b=[];return a.replace(v,"").replace(u,function(a,c,d){d&&b.push(d)}),b},f.get=function(a,b){return p[a]||(p[a]=new f(a,b))},f.save=function(a,b){var c=f.get(a);if(c.status<q.SAVED)return c.url=a,c.dependencies=b.deps||[],c.factory=b.factory,void(c.status=q.SAVED);throw new Error("override module: "+c.url)},f.use=function(a,b,c){var d=f.get(c,a);d.callback=function(){for(var a=d.dependencies,c=[],e=0,g=a.length;g>e;e++){var h=f.resolve(a[e]);c[e]=p[h].exec()}b&&b.apply(null,c),delete d.callback},d.load()},f.preload=function(a){function b(){t.preload=[],a()}var c=t.preload||[];return c.length?void f.use(c,b,t.base+"_preload_"+s.uid()):a()},g.amd={jQuery:!0};var w,x;a.define=g,l.use=h,l.define=g,l.alias=c,l.preload=d,l.base=e,l.cache=p}(this);